<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习效果评估 - 智能学习地图</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --primary-color: #2563EB;
            --bg-color: #F8FAFC;
            --card-bg: #FFFFFF;
            --text-color: #1E293B;
            --border-color: #E2E8F0;
        }
        body {
            background-color: var(--bg-color);
            font-family: 'Segoe UI', sans-serif;
        }
        .navbar {
            background-color: var(--card-bg);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .main-container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 24px;
            margin-bottom: 24px;
        }
        .assessment-item {
            background: var(--bg-color);
            border-radius: 8px;
            padding: 16px;
            border: 1px solid var(--border-color);
            margin-bottom: 12px;
        }
        .btn-primary {
            background: var(--primary-color);
            border: none;
            border-radius: 8px;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
    </style>
</head>
<body>
    <div id="app">
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="../index.html"><i class="bi bi-book"></i> 智能学习地图</a>
                <div class="d-flex align-items-center gap-3">
                    <span class="text-muted">张明 | 重介操作工</span>
                    <button class="btn btn-primary">个人中心</button>
                </div>
            </div>
        </nav>

        <div class="main-container">
            <h2>学习效果评估</h2>
            <p class="text-muted">全面评估学习效果，确保培训质量</p>

            <div class="row g-4 mb-4">
                <div class="col-md-3">
                    <div class="card text-center">
                        <h3 class="text-primary">48</h3>
                        <p class="mb-0">评估次数</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <h3 class="text-success">95%</h3>
                        <p class="mb-0">通过率</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <h3>87分</h3>
                        <p class="mb-0">平均分</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <h3 class="text-warning">92%</h3>
                        <p class="mb-0">双述达标率</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h4>评估类型</h4>
                <div class="d-flex gap-2 flex-wrap">
                    <button class="btn btn-outline-primary" 
                            v-for="type in assessmentTypes" 
                            :key="type.id"
                            :class="{ active: selectedType === type.id }"
                            @click="selectedType = type.id">
                        <i :class="type.icon"></i> {{ type.name }}
                    </button>
                </div>
            </div>

            <div class="card">
                <h4>评估记录</h4>
                <div v-for="assessment in assessments" :key="assessment.id" class="assessment-item">
                    <div class="d-flex justify-content-between">
                        <div>
                            <div class="d-flex align-items-center gap-2 mb-2">
                                <h5>{{ assessment.title }}</h5>
                                <span class="badge bg-secondary">{{ assessment.type }}</span>
                            </div>
                            <p class="mb-2 text-muted">{{ assessment.description }}</p>
                            <small><i class="bi bi-calendar"></i> {{ assessment.date }}</small>
                        </div>
                        <div class="text-end">
                            <div class="mb-2">
                                <span class="badge" :class="getScoreBadge(assessment.score)">
                                    {{ assessment.score }}分
                                </span>
                            </div>
                            <button class="btn btn-sm btn-primary" @click="viewDetail(assessment)">
                                查看详情
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <h4>成绩趋势</h4>
                        <div class="chart-container">
                            <canvas id="scoreChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <h4>评估分布</h4>
                        <div class="chart-container">
                            <canvas id="distributionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    selectedType: 'all',
                    assessmentTypes: [
                        { id: 'all', name: '全部', icon: 'bi bi-collection' },
                        { id: 'dual', name: '双述演练', icon: 'bi bi-mic' },
                        { id: 'exam', name: '在线考试', icon: 'bi bi-pencil-square' },
                        { id: 'emergency', name: '应急演练', icon: 'bi bi-shield-exclamation' }
                    ],
                    assessments: [
                        {
                            id: 1,
                            title: '岗位描述 - 重介操作工',
                            description: '岗位描述标准话术，表述清晰准确',
                            date: '2026-01-21',
                            score: 95,
                            type: '双述演练'
                        },
                        {
                            id: 2,
                            title: '重介旋流器操作规程考试',
                            description: '涵盖操作流程、安全注意事项等内容',
                            date: '2026-01-20',
                            score: 92,
                            type: '在线考试'
                        },
                        {
                            id: 3,
                            title: '火灾应急处置演练',
                            description: '火灾发生时的应急处置流程和逃生方法',
                            date: '2026-01-15',
                            score: 90,
                            type: '应急演练'
                        }
                    ]
                };
            },
            methods: {
                getScoreBadge(score) {
                    if (score >= 90) return 'bg-success';
                    if (score >= 80) return 'bg-primary';
                    if (score >= 70) return 'bg-warning';
                    return 'bg-danger';
                },
                viewDetail(assessment) {
                    alert('查看详情：' + assessment.title);
                }
            },
            mounted() {
                const ctx1 = document.getElementById('scoreChart').getContext('2d');
                new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels: ['1月', '2月', '3月', '4月', '5月', '6月'],
                        datasets: [{
                            label: '平均分',
                            data: [82, 85, 84, 87, 89, 87],
                            borderColor: 'rgba(37, 99, 235, 1)',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });

                const ctx2 = document.getElementById('distributionChart').getContext('2d');
                new Chart(ctx2, {
                    type: 'doughnut',
                    data: {
                        labels: ['双述演练', '在线考试', '应急演练'],
                        datasets: [{
                            data: [18, 20, 10],
                            backgroundColor: [
                                'rgba(37, 99, 235, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }).mount('#app');
    </script>
</body>
</html>